<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Curso M√∫sica F√°cil</title>

<style>

/* ============================= */
/* ===== CONFIGURA√á√ÉO GERAL ==== */
/* ============================= */

body{
    margin:0;
    font-family: Arial, sans-serif;
    text-align:center;
    color:white;
}

header{
    background:#111;
    color:white;
    padding:15px;
    position:fixed;
    top:0;
    width:100%;
    z-index:1000;
}

nav button{
    margin:5px;
    padding:8px 15px;
    border:none;
    border-radius:20px;
    cursor:pointer;
    font-weight:bold;
}

.tela{
    display:none;
    padding-top:130px;
    min-height:100vh;
}

/* ============================= */
/* ===== TELA 1 - RITMO ======= */
/* ============================= */

#tela1{
    background: linear-gradient(135deg,#ff8c00,#ff3c00);
}

.pontuacao{
    font-size:18px;
    margin-top:10px;
}

.pergunta{
    font-size:22px;
    margin:15px;
}

.pauta{
    margin:20px auto;
    width:350px;
}

.notas-container{
    display:flex;
    justify-content:center;
    flex-wrap:wrap;
    gap:20px;
    margin-top:20px;
}

.nota{
    background:white;
    border-radius:15px;
    padding:15px;
    cursor:pointer;
    transition:0.3s;
    color:black;
    width:110px;
}

.nota:hover{
    transform:scale(1.1);
    background:#ffe066;
}

.correto{
    font-size:30px;
    font-weight:bold;
    color:#00ff66;
}

.errado{
    font-size:26px;
    color:#ffffff;
}

#proximo{
    margin-top:20px;
    padding:10px 20px;
    font-size:18px;
    border:none;
    border-radius:10px;
    background:#222;
    color:white;
    cursor:pointer;
    display:none;
}

/* ============================= */
/* ===== TELA 2 - NOTAS ======= */
/* ============================= */

#tela2{
    background: linear-gradient(135deg,#2196f3,#0d47a1);
}

.staff{
    margin:30px auto;
    width:350px;
    height:160px;
    position:relative;
}

.staff-line{
    position:absolute;
    width:100%;
    height:2px;
    background:white;
}

.note-dot{
    position:absolute;
    width:18px;
    height:18px;
    background:yellow;
    border-radius:50%;
}

.note-name{
    position:absolute;
    font-size:14px;
    font-weight:bold;
}

.notas-botoes{
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:15px;
    margin-top:20px;
}

.botao-nota{
    padding:10px 15px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    font-weight:bold;
}

.botao-nota:hover{
    transform:scale(1.1);
}

</style>
</head>

<body>

<header>
    <h2>üéº Curso M√∫sica F√°cil</h2>
    <nav>
        <button style="background:#ff9800;color:white;" onclick="mostrarTela('tela1')">üü† Figuras de Som</button>
        <button style="background:#2196f3;color:white;" onclick="mostrarTela('tela2')">üîµ Notas na Pauta</button>
    </nav>
</header>

<!-- ================================================= -->
<!-- ================= TELA 1 ======================== -->
<!-- ================================================= -->

<section id="tela1" class="tela">

<h1>üéµ N√≠vel 1 - Figuras de Som</h1>

<div class="pontuacao">
‚≠ê Pontos: <span id="pontos">0</span> |
‚ùå Erros: <span id="erros">0</span>
</div>

<div class="pergunta" id="pergunta"></div>

<svg class="pauta" height="130">
  <line x1="60" y1="30" x2="340" y2="30" stroke="white" stroke-width="2"/>
  <line x1="60" y1="50" x2="340" y2="50" stroke="white" stroke-width="2"/>
  <line x1="60" y1="70" x2="340" y2="70" stroke="white" stroke-width="2"/>
  <line x1="60" y1="90" x2="340" y2="90" stroke="white" stroke-width="2"/>
  <line x1="60" y1="110" x2="340" y2="110" stroke="white" stroke-width="2"/>
  <circle id="notaCerta" cx="200" cy="70" r="8" fill="yellow" style="display:none;"/>
</svg>

<div class="notas-container">
<div class="nota" onclick="verificar(4)">4 tempos</div>
<div class="nota" onclick="verificar(2)">2 tempos</div>
<div class="nota" onclick="verificar(1)">1 tempo</div>
<div class="nota" onclick="verificar(0.5)">1/2 tempo</div>
</div>

<div id="resposta"></div>
<button id="proximo" onclick="novaPergunta()">Pr√≥ximo ‚ñ∂</button>

</section>

<!-- ================================================= -->
<!-- ================= TELA 2 ======================== -->
<!-- ================================================= -->

<section id="tela2" class="tela">

<h1>üéº N√≠vel 2 - Notas na Pauta</h1>

<div class="staff" id="staff">

<div class="staff-line" style="top:30px;"></div>
<div class="staff-line" style="top:50px;"></div>
<div class="staff-line" style="top:70px;"></div>
<div class="staff-line" style="top:90px;"></div>
<div class="staff-line" style="top:110px;"></div>

</div>

<div class="notas-botoes">
<button class="botao-nota" onclick="mostrarNota('Mi')">Mi</button>
<button class="botao-nota" onclick="mostrarNota('F√°')">F√°</button>
<button class="botao-nota" onclick="mostrarNota('Sol')">Sol</button>
<button class="botao-nota" onclick="mostrarNota('L√°')">L√°</button>
<button class="botao-nota" onclick="mostrarNota('Si')">Si</button>
<button class="botao-nota" onclick="mostrarNota('D√≥')">D√≥</button>
<button class="botao-nota" onclick="mostrarNota('R√©')">R√©</button>
</div>

</section>

<script>

/* ============================= */
/* ===== CONTROLE DE TELAS ===== */
/* ============================= */

function mostrarTela(id){
    document.querySelectorAll(".tela").forEach(t=>t.style.display="none");
    document.getElementById(id).style.display="block";
}

mostrarTela("tela1");

/* ============================= */
/* ===== L√ìGICA TELA 1 ========= */
/* ============================= */

let audioCtx = new (window.AudioContext || window.webkitAudioContext)();
let bpm = 60;
let tempo = 60 / bpm;

let valores = [4,2,1,0.5];
let respostaCorreta;
let pontos = 0;
let erros = 0;

function tocarSom(duracao){
    let agora = audioCtx.currentTime;
    let osc = audioCtx.createOscillator();
    let gain = audioCtx.createGain();

    osc.type = "sine";
    osc.frequency.value = 440;
    gain.gain.value = 0.3;

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    osc.start(agora);
    osc.stop(agora + (duracao * tempo));
}

function novaPergunta(){
    respostaCorreta = valores[Math.floor(Math.random()*valores.length)];
    document.getElementById("pergunta").innerHTML =
        "Qual figura vale <strong>" + respostaCorreta + " tempo(s)</strong>?";
    document.getElementById("resposta").innerHTML = "";
    document.getElementById("notaCerta").style.display = "none";
    document.getElementById("proximo").style.display = "none";
}

function verificar(valor){
    tocarSom(valor);
    if(valor === respostaCorreta){
        pontos++;
        document.getElementById("pontos").innerText = pontos;
        document.getElementById("resposta").innerHTML = "<div class='correto'>‚úî CORRETO!</div>";
        document.getElementById("notaCerta").style.display = "block";
    }else{
        erros++;
        document.getElementById("erros").innerText = erros;
        document.getElementById("resposta").innerHTML = "<div class='errado'>‚úò Tente novamente!</div>";
    }
    document.getElementById("proximo").style.display = "inline-block";
}

novaPergunta();

/* ============================= */
/* ===== L√ìGICA TELA 2 ========= */
/* ============================= */

const posicoes = {
  "Mi":110,
  "F√°":100,
  "Sol":90,
  "L√°":80,
  "Si":70,
  "D√≥":60,
  "R√©":50
};

const frequencias = {
  "Mi":329.63,
  "F√°":349.23,
  "Sol":392.00,
  "L√°":440.00,
  "Si":493.88,
  "D√≥":523.25,
  "R√©":587.33
};

function mostrarNota(nota){

    const staff = document.getElementById("staff");
    staff.querySelectorAll(".note-dot,.note-name").forEach(e=>e.remove());

    const bolinha = document.createElement("div");
    bolinha.className="note-dot";
    bolinha.style.top = posicoes[nota]+"px";
    bolinha.style.left = "160px";

    const nome = document.createElement("div");
    nome.className="note-name";
    nome.innerText = nota;
    nome.style.top = (posicoes[nota]-20)+"px";
    nome.style.left = "160px";

    staff.appendChild(bolinha);
    staff.appendChild(nome);

    tocarNota(frequencias[nota]);
}

function tocarNota(freq){
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();

    osc.type="triangle";
    osc.frequency.value=freq;

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    gain.gain.setValueAtTime(0,audioCtx.currentTime);
    gain.gain.linearRampToValueAtTime(0.6,audioCtx.currentTime+0.02);
    gain.gain.exponentialRampToValueAtTime(0.001,audioCtx.currentTime+1);

    osc.start();
    osc.stop(audioCtx.currentTime+1);
}

</script>

</body>
</html>

<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Curso Musical - N√≠vel 1</title>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    text-align:center;
    background: linear-gradient(135deg,#ff8c00,#ff3c00);
    color:white;
}

h1{ margin-top:20px; }

.pontuacao{
    font-size:18px;
    margin-top:10px;
}

.pergunta{
    font-size:22px;
    margin:15px;
}

.pauta{
    margin:20px auto;
    width:350px;
}

.notas{
    display:flex;
    justify-content:center;
    flex-wrap:wrap;
    gap:20px;
    margin-top:20px;
}

.nota{
    background:white;
    border-radius:15px;
    padding:15px;
    cursor:pointer;
    transition:0.3s;
    color:black;
    width:110px;
}

.nota:hover{
    transform:scale(1.1);
    background:#ffe066;
}

.resposta{ margin-top:25px; }

.correto{
    font-size:30px;
    font-weight:bold;
    color:#00ff66;
}

.errado{
    font-size:26px;
    color:#ffffff;
}

button{
    margin-top:20px;
    padding:10px 20px;
    font-size:18px;
    border:none;
    border-radius:10px;
    background:#222;
    color:white;
    cursor:pointer;
    display:none;
}

button:hover{ background:#000; }
</style>
</head>

<body>

<h1>üéµ Curso Musical - N√≠vel 1</h1>

<div class="pontuacao">
‚≠ê Pontos: <span id="pontos">0</span> |
‚ùå Erros: <span id="erros">0</span>
</div>

<div class="pergunta" id="pergunta"></div>

<!-- Pauta -->
<svg class="pauta" height="130">
  <line x1="60" y1="30" x2="340" y2="30" stroke="white" stroke-width="2"/>
  <line x1="60" y1="50" x2="340" y2="50" stroke="white" stroke-width="2"/>
  <line x1="60" y1="70" x2="340" y2="70" stroke="white" stroke-width="2"/>
  <line x1="60" y1="90" x2="340" y2="90" stroke="white" stroke-width="2"/>
  <line x1="60" y1="110" x2="340" y2="110" stroke="white" stroke-width="2"/>
  <circle id="notaCerta" cx="200" cy="70" r="8" fill="yellow" style="display:none;"/>
</svg>

<div class="notas">

<div class="nota" onclick="verificar(4)">
<svg width="50" height="60">
  <ellipse cx="25" cy="30" rx="15" ry="10" fill="none" stroke="black" stroke-width="3"/>
</svg>
4 tempos
</div>

<div class="nota" onclick="verificar(2)">
<svg width="50" height="60">
  <ellipse cx="20" cy="35" rx="12" ry="8" fill="none" stroke="black" stroke-width="3"/>
  <line x1="32" y1="35" x2="32" y2="5" stroke="black" stroke-width="3"/>
</svg>
2 tempos
</div>

<div class="nota" onclick="verificar(1)">
<svg width="50" height="60">
  <ellipse cx="20" cy="35" rx="12" ry="8" fill="black"/>
  <line x1="32" y1="35" x2="32" y2="5" stroke="black" stroke-width="3"/>
</svg>
1 tempo
</div>

<div class="nota" onclick="verificar(0.5)">
<svg width="50" height="60">
  <ellipse cx="20" cy="35" rx="12" ry="8" fill="black"/>
  <line x1="32" y1="35" x2="32" y2="5" stroke="black" stroke-width="3"/>
  <path d="M32 5 Q50 15 35 25" stroke="black" stroke-width="3" fill="none"/>
</svg>
1/2 tempo
</div>

</div>

<div class="resposta" id="resposta"></div>
<button id="proximo" onclick="novaPergunta()">Pr√≥ximo ‚ñ∂</button>

<script>

let audioCtx = new (window.AudioContext || window.webkitAudioContext)();
let bpm = 60;
let tempo = 60 / bpm;

let valores = [4,2,1,0.5];
let respostaCorreta;
let pontos = 0;
let erros = 0;

function tocarSom(duracao){
    let agora = audioCtx.currentTime;
    let osc = audioCtx.createOscillator();
    let gain = audioCtx.createGain();

    osc.type = "sine";
    osc.frequency.value = 440;
    gain.gain.value = 0.3;

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    osc.start(agora);
    osc.stop(agora + (duracao * tempo));
}

function novaPergunta(){
    respostaCorreta = valores[Math.floor(Math.random()*valores.length)];

    document.getElementById("pergunta").innerHTML =
        "Qual figura vale <strong>" + respostaCorreta + " tempo(s)</strong>?";

    document.getElementById("resposta").innerHTML = "";
    document.getElementById("notaCerta").style.display = "none";
    document.getElementById("proximo").style.display = "none";
}

function verificar(valor){

    tocarSom(valor);

    let resposta = document.getElementById("resposta");
    let botao = document.getElementById("proximo");

    if(valor === respostaCorreta){
        pontos++;
        document.getElementById("pontos").innerText = pontos;
        resposta.innerHTML = "<div class='correto'>‚úî CORRETO!</div>";
        document.getElementById("notaCerta").style.display = "block";
    }else{
        erros++;
        document.getElementById("erros").innerText = erros;
        resposta.innerHTML = "<div class='errado'>‚úò Tente novamente!</div>";
    }

    botao.style.display = "inline-block";
}

novaPergunta();

</script>

</body>
</html>
